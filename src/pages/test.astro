---
import app from "@/api";
import api from "@/app/lib/client";
import Root from "@/layouts/root.astro";

const { origin } = new URL(Astro.request.url);
console.log("original:", origin);
const url = `${origin}/api/todos`;
const request = new Request(url, {
  method: "GET",
  headers: Astro.request.headers,
});
console.log(request);
const res = await app.request(request);
const todos = await res.json();

console.log(todos);
---

<Root>
  <pre>
    {JSON.stringify(todos, null, 2)}
  </pre>
</Root>
